const { GoogleGenerativeAI } = require('@google/generative-ai');
const genAI = new GoogleGenerativeAI('AIzaSyClOiWhZymx1Zmyy7sWt2M2BnjvcS5wyTk');

async function getDetailedStory(story) {
    try {
const model = genAI.getGenerativeModel({ model: "gemini-2.0-flash" });

const prompt = `
๐ **ุชุญููู ุนูููุฉ ุงุญุชูุงู ูู ุฏูุณููุฑุฏ** ๐
ุงูุช ุงููุณุงุนุฏ ุงูุฐูู ูู RedBull Protection ุงูุฐู ููุฌุฏ ููู ุซูุงุซ ุงูุณุงู ููู : ุงูุชุดููุฑ ูุงููุณุทุงุก ูุงููุฒุงุฏ
ูุงูุช ุชุนูู ูู ูุณู ุงูุชุดููุฑ 
ุงูุฐู ูููู ููู ุจุชุดููุฑ ุงููุตุงุจูู ุงูุฐูู ููุตุจูุง ูู ุงูุฏูุณููุฑุฏ ุณูุงุก ูู ุงููุฌุชูุน ุงูุนุฑุจู ุงู ูุง 
ููุฌุฏ ูู ุงูุฏูุณููุฑุฏ ุนุฏู ุนููุงุช ูุซู ุงููุฑุฏูุช ุงูุชุงุจุน ู ุจุฑูุจูุช ูุซู ุงูุจูุชุณ ุงูุชุงุจุน ู ููุชูุณ ูุซู ูููุง ุงู ูููุง ุจูุชุณ ุงูุชุงุจุน ู ูููุง ุงูุฎ .. 
ููุฏ ุทูุจ ูุดูุฑ ูุณุงุนุฏุชู ูู ุชุญููู ูููู ุงููุตู 
ูุง ููุฌุฏ ูู ุงููุตู ุงุณูุงุก ูู ุฏุงุฎู ูุฑูุจุงุช ุงููุตู ููุณูุง 
ูู ุญุงู ูุฌุฏุช ุงุณู ุชุงูุฏ ุงู ุงูุงุณู ููุณ ูู ูุฑูุจุงุช ุงููุตู

๐ **ุทุฑููุฉ ุงูุชุญููู:**
- **ููุฎุต ุจุณูุท ููุฃุญุฏุงุซ.**
- **ููู ููุน ุงูุงุญุชูุงูุ** (ูุง ุงูุฃุณุงููุจ ุงููุณุชุฎุฏูุฉุ).
- ** ูู ุงูููุงูุฉ :** ูุฏู ูุฑุฎุตูุง ุชุดุฑุญ ููู ุงููุตุฉ ุจุทุฑููุฉ ูุงุถุญุฉ ูุจููุฌู ุนุงููู ููููููู ุนูุฏ ูู ุงููุฌุงุช.

**ุงููุตุฉ ุงูููุฏูุฉ ููุชุญููู:** ${story}

ูุง ุชูู ุจูุชุงุจุฉ ุงู ุดุฆ ุงุฎุฑ ุณูุงุก ูุชุฑุญูุจ ุงูุฎ ..
ูุง ุชูู ุจูุชุงุจุฉ ูุตุงุฆุญ ุงู ุชุนูููุงุช ุงู ุงู ุดุฆ ุงุฎุฑ..
ูุง ุชูู ุจูุชุงุจุฉ ุนูุงููู ุทุฑููู ุงูุชุญููู ุจู ูุณููู ุงูู ุงูุณุงู ..
ูู ุจุงูุชููู ุจุงููุบู ุงูุนุฑุจูู ุจุงููุฌู ุงุงูุณุนูุฏูู ูุงููููุชูู ..
๐ ูู ุจุงูุชุญููู ุงูุขู ููุฏู ุชูุฑูุฑูุง ูุบุทู ูู ุงูููุงุท ุงููุฐููุฑุฉ ุจุดูู ูุงุถุญ ูุณูู ุงูููู.`;

const result = await model.generateContent({ contents: [{ role: "user", parts: [{ text: prompt }] }] });
const response = result.response.candidates[0].content.parts[0].text;
        
return response;

} catch (error) {
        console.error("โ ุฎุทุฃ ูู ุชุญููู ุงููุตุฉ ุจุงุณุชุฎุฏุงู Gemini:", error);
        return "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงููุตุฉ.";
    }

}

module.exports = { getDetailedStory };